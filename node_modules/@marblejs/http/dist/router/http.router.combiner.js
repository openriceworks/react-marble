"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.combineRouteMiddlewares = exports.combineRoutes = void 0;
const http_router_helpers_1 = require("./http.router.helpers");
function combineRoutes(path, configOrEffects) {
    return {
        path,
        effects: (0, http_router_helpers_1.isRouteCombinerConfig)(configOrEffects)
            ? configOrEffects.effects
            : configOrEffects,
        middlewares: (0, http_router_helpers_1.isRouteCombinerConfig)(configOrEffects)
            ? (configOrEffects.middlewares || [])
            : [],
    };
}
exports.combineRoutes = combineRoutes;
const combineRouteMiddlewares = (decorate, errorSubject) => (...middlewares) => (input$, ctx) => middlewares.reduce((i$, middleware) => middleware(decorate ? (0, http_router_helpers_1.decorateMiddleware)(i$, errorSubject) : i$, ctx), decorate ? (0, http_router_helpers_1.decorateMiddleware)(input$, errorSubject) : input$);
exports.combineRouteMiddlewares = combineRouteMiddlewares;
