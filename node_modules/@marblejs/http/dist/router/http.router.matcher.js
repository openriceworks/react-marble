"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.matchRoute = void 0;
const matchRoute = (routing) => (url, method) => {
    for (let i = 0; i < routing.length; ++i) {
        const { regExp, methods, path } = routing[i];
        const match = url.match(regExp);
        if (!match) {
            continue;
        }
        const matchedMethod = methods[method] || methods['*'];
        if (!matchedMethod) {
            continue;
        }
        const params = {};
        if (matchedMethod.parameters) {
            for (let p = 0; p < matchedMethod.parameters.length; p++) {
                params[matchedMethod.parameters[p]] = decodeURIComponent(match[p + 1]);
            }
        }
        return {
            subject: matchedMethod.subject,
            params,
            path,
        };
    }
    return undefined;
};
exports.matchRoute = matchRoute;
