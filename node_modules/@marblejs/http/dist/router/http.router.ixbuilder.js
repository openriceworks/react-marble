"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.r = void 0;
const core_1 = require("@marblejs/core");
const IxBuilder_1 = require("@marblejs/core/dist/+internal/fp/IxBuilder");
const route = new IxBuilder_1.IxBuilder({});
const matchPath = (path) => (0, IxBuilder_1.ichainCurry)((spec) => new IxBuilder_1.IxBuilder(Object.assign(Object.assign({}, spec), { path })));
const matchType = (method) => (0, IxBuilder_1.ichainCurry)((spec) => new IxBuilder_1.IxBuilder(Object.assign(Object.assign({}, spec), { method })));
const use = (middleware) => (0, IxBuilder_1.ichainCurry)((spec) => new IxBuilder_1.IxBuilder(Object.assign(Object.assign({}, spec), { middleware: spec.middleware
        ? (0, core_1.combineMiddlewares)(spec.middleware, middleware)
        : middleware })));
const useEffect = (effect) => (0, IxBuilder_1.ichainCurry)((spec) => new IxBuilder_1.IxBuilder(Object.assign(Object.assign({}, spec), { effect })));
const applyMeta = (meta) => (0, IxBuilder_1.ichainCurry)((spec) => new IxBuilder_1.IxBuilder(Object.assign(Object.assign({}, spec), { meta: Object.assign(Object.assign({}, spec.meta), meta) })));
function pipe(...fns) {
    return fns.reduce((prevFn, nextFn) => value => nextFn(prevFn(value)), value => value)(route).run();
}
exports.r = { matchPath, matchType, use, useEffect, applyMeta, pipe };
