"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.factorizeRegExpWithParams = void 0;
const path_to_regexp_1 = require("path-to-regexp");
const factorizeRegExpWithParams = (path) => {
    const keys = [];
    const preparedPath = path
        .replace(/\/\*/g, '/(.*)') /* Transfer wildcards */
        .replace(/\/\/+/g, '/') /* Remove repeated backslashes */
        .replace(/\/$/, ''); /* Remove trailing backslash */
    const regExp = (0, path_to_regexp_1.pathToRegexp)(preparedPath, keys, { strict: false });
    const regExpParameters = keys
        .filter(key => key.name !== 0) /* Filter wildcard groups */
        .map(key => String(key.name));
    return {
        regExp,
        parameters: regExpParameters.length > 0 ? regExpParameters : undefined,
        path: preparedPath,
    };
};
exports.factorizeRegExpWithParams = factorizeRegExpWithParams;
