"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.enableHttpRequestMetadata = exports.getHttpRequestMetadataIdHeader = exports.createRequestMetadataHeader = exports.HTTP_REQUEST_METADATA_ID_HEADER_KEY = void 0;
const utils_1 = require("@marblejs/core/dist/+internal/utils");
const http_config_1 = require("../http.config");
const header_util_1 = require("./header.util");
exports.HTTP_REQUEST_METADATA_ID_HEADER_KEY = 'X-Request-Metadata-Id';
/**
 * Creates random request metadata header entry
 *
 * @returns headers `HttpHeaders`
 */
const createRequestMetadataHeader = () => ({
    [exports.HTTP_REQUEST_METADATA_ID_HEADER_KEY]: (0, utils_1.createUuid)(),
});
exports.createRequestMetadataHeader = createRequestMetadataHeader;
/**
 * Get custom request metadata header value
 *
 * @param headers `HttpHeaders`
 * @returns optional header value
 */
exports.getHttpRequestMetadataIdHeader = (0, header_util_1.getHeaderValue)(exports.HTTP_REQUEST_METADATA_ID_HEADER_KEY);
/**
 * Activates `MARBLE_HTTP_REQUEST_METADATA_ENV_KEY` environment variable
 *
 * @returns `void`
 */
const enableHttpRequestMetadata = () => process.env[http_config_1.MARBLE_HTTP_REQUEST_METADATA_ENV_KEY] = 'true';
exports.enableHttpRequestMetadata = enableHttpRequestMetadata;
