"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.configureResponse = void 0;
const applyHeaders_1 = require("./applyHeaders");
const util_1 = require("./util");
function configureResponse(req, res, options) {
    const headers = [];
    const origin = req.headers.origin;
    headers.push({ key: applyHeaders_1.AccessControlHeader.Origin, value: origin });
    if (options.withCredentials) {
        headers.push({ key: applyHeaders_1.AccessControlHeader.Credentials, value: 'true' });
    }
    if (Array.isArray(options.exposeHeaders) &&
        options.exposeHeaders.length > 0) {
        headers.push({
            key: applyHeaders_1.AccessControlHeader.ExposeHeaders,
            value: options.exposeHeaders.map(header => (0, util_1.capitalize)(header)).join(', '),
        });
    }
    (0, applyHeaders_1.applyHeaders)(headers, res);
}
exports.configureResponse = configureResponse;
