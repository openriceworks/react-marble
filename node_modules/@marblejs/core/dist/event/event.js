"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.event = exports.isEventCodec = exports.EVENT_CODEC_NAME = void 0;
const t = require("io-ts");
exports.EVENT_CODEC_NAME = 'EventSchema';
const isEventCodec = (codec) => codec.name === exports.EVENT_CODEC_NAME;
exports.isEventCodec = isEventCodec;
/**
 * Creates an Event codec for decoding and creating I/O events.
 * @since v3.3.0
 * @example
 *
 * const CreateUser = event('CREATE_USER')(t.type({
 *   name: t.string,
 *   age: t.number,
 * }));
 *
 * CreateUser.create({
 *   name: 'Bob',
 *   age: 21,
 * });
 */
const event = (type) => (payload) => {
    const schema = t.type({
        type: t.literal(type),
        payload: payload !== null && payload !== void 0 ? payload : t.undefined,
    }, exports.EVENT_CODEC_NAME);
    const create = (payload) => schema.encode({ type, payload });
    return Object.assign(Object.assign({}, schema), { create });
};
exports.event = event;
