"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getBody = exports.hasBody = exports.isMultipart = exports.matchType = void 0;
const typeIs = require("type-is");
const function_1 = require("fp-ts/lib/function");
const operators_1 = require("rxjs/operators");
const contentType_util_1 = require("@marblejs/http/dist/+internal/contentType.util");
const observable_1 = require("@marblejs/core/dist/+internal/observable");
const matchType = (type) => (req) => !!typeIs.is((0, contentType_util_1.getContentTypeUnsafe)(req.headers), type);
exports.matchType = matchType;
const isMultipart = (req) => (0, contentType_util_1.getContentTypeUnsafe)(req.headers).includes('multipart/');
exports.isMultipart = isMultipart;
const hasBody = (req) => req.body !== undefined && req.body !== null;
exports.hasBody = hasBody;
const getBody = (req) => (0, function_1.pipe)((0, observable_1.fromReadableStream)(req), (0, operators_1.toArray)(), (0, operators_1.map)(chunks => Buffer.concat(chunks)));
exports.getBody = getBody;
