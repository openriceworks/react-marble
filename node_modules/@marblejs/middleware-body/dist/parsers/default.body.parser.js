"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.defaultParser = void 0;
const typeis = require("type-is");
const contentType_util_1 = require("@marblejs/http/dist/+internal/contentType.util");
const json_body_parser_1 = require("./json.body.parser");
const text_body_parser_1 = require("./text.body.parser");
const raw_body_parser_1 = require("./raw.body.parser");
const url_body_parser_1 = require("./url.body.parser");
const SUPPORTED_CONTENT_TYPES = ['json', 'urlencoded', 'application/octet-stream', 'text', 'html'];
const defaultParser = reqOrContentType => body => {
    const contentType = typeof reqOrContentType === 'string'
        ? reqOrContentType
        : (0, contentType_util_1.getContentTypeUnsafe)(reqOrContentType.headers);
    switch (typeis.is(contentType, SUPPORTED_CONTENT_TYPES)) {
        case 'json':
            return (0, json_body_parser_1.jsonParser)(reqOrContentType)(body);
        case 'urlencoded':
            return (0, url_body_parser_1.urlEncodedParser)(reqOrContentType)(body);
        case 'application/octet-stream':
            return (0, raw_body_parser_1.rawParser)(reqOrContentType)(body);
        case 'text':
        case 'html':
            return (0, text_body_parser_1.textParser)(reqOrContentType)(body);
        default:
            return undefined;
    }
};
exports.defaultParser = defaultParser;
